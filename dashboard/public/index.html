<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tradovate トレード分析ダッシュボード</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <!-- Header -->
  <header class="app-header">
    <div style="display:flex;align-items:center;">
      <h1>Tradovate Analytics</h1>
      <span class="subtitle">トレード分析ダッシュボード</span>
    </div>
    <div>
      <button id="btn-save-sheets" class="btn-primary btn-sm">Google Sheetsに保存</button>
    </div>
  </header>

  <!-- Notifications -->
  <div id="notification" class="notification"></div>
  <div id="status-message"></div>

  <!-- Mapping Modal -->
  <div id="mapping-modal">
    <div id="mapping-content"></div>
  </div>

  <div class="main-container">
    <!-- Upload Section -->
    <section id="section-upload" class="section active">
      <div class="upload-container">
        <h2 class="upload-title">CSVファイルをアップロード</h2>
        <p class="upload-desc">
          TradovateからダウンロードしたCSVファイル（Performance, Fills, Orders）を<br>
          ドラッグ&amp;ドロップまたはクリックで選択してください。
        </p>
        <div id="drop-zone">
          <div class="drop-icon">&#128196;</div>
          <div class="drop-text">
            ここにCSVファイルをドロップ<br>
            または<strong>クリックして選択</strong>
          </div>
          <div class="supported-formats">対応形式: .csv（UTF-8, Shift-JIS）</div>
        </div>
        <input type="file" id="csv-file-input" accept=".csv" style="display:none">
      </div>
    </section>

    <!-- Dashboard Section -->
    <section id="section-dashboard" class="section">
      <!-- File Info -->
      <div id="file-info"></div>

      <!-- KPI Cards -->
      <div id="kpi-cards"></div>

      <!-- Extended KPI Cards -->
      <div id="extended-kpi-cards"></div>

      <!-- P/L Calendar -->
      <div id="pnl-calendar" class="calendar-section"></div>

      <!-- Charts -->
      <div class="charts-grid">
        <div class="chart-container full-width">
          <canvas id="chart-cumulative-pnl"></canvas>
        </div>
        <div class="chart-container">
          <canvas id="chart-daily-pnl"></canvas>
        </div>
        <div class="chart-container">
          <canvas id="chart-day-of-week"></canvas>
        </div>
      </div>

      <!-- Trade Table -->
      <div class="table-section">
        <h2>トレード一覧</h2>
        <div id="table-filters"></div>
        <div id="trade-table-container"></div>
      </div>
    </section>
  </div>

  <!-- Scripts -->
  <script src="/js/csv-parser.js"></script>
  <script src="/js/kpi.js"></script>
  <script src="/js/calendar.js"></script>
  <script src="/js/charts.js"></script>
  <script src="/js/table.js"></script>
  <script src="/js/local-storage.js"></script>
  <script src="/js/app.js"></script>
</body>
</html>
